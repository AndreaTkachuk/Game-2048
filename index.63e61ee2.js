!function(){var e=new/*#__PURE__*/(function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),console.log(e)}return e=[{key:"moveLeft",value:function(){}},{key:"moveRight",value:function(){}},{key:"moveUp",value:function(){}},{key:"moveDown",value:function(){}},{key:"getScore",value:function(){}},{key:"getState",value:function(){}},{key:"getStatus",value:function(){}},{key:"start",value:function(){}},{key:"restart",value:function(){}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}()),t=document.querySelector(".button"),n=document.querySelector(".message-start"),r=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),u=document.querySelector(".game-score"),a=document.querySelectorAll(".field-cell"),c="idle",l=0,s=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=[];t.addEventListener("click",function(n){t.classList.contains("start")?e.start():e.restart()}),e.getScore=function(){return u.textContent},e.getState=function(){return i},e.getStatus=function(){return c},e.start=function(){t.classList.replace("start","restart"),t.textContent="Restart",n.className.includes("hidden")||n.classList.add("hidden"),r.className.includes("hidden")||r.classList.add("hidden"),o.className.includes("hidden")||o.classList.add("hidden"),c="playing",i=structuredClone(s),u.textContent=0;for(var e=0;e<2;e++)v(i[Math.floor(4*Math.random())]);g()},e.restart=function(){t.classList.replace("restart","start"),t.textContent="Start",n.classList.remove("hidden"),r.className.includes("hidden")||r.classList.add("hidden"),o.className.includes("hidden")||o.classList.add("hidden"),u.textContent=0,c="idle",i=structuredClone(s),g()},e.moveLeft=function(){var e=structuredClone(i);i.forEach(function(e){return h(e)}),y(e,i)||p(i),e=null,u.textContent=l,g()},e.moveRight=function(){var e=structuredClone(i);i.forEach(function(e){return m(e)}),y(e,i)||p(i),e=null,u.textContent=l,g()},e.moveUp=function(){var e=function(e){for(var t=[],n=[],r=0;r<4;r++){for(var o=[],u=0;u<4;u++)o.push(e[u][r]);t.push(o)}t.forEach(function(e){return h(e)});for(var a=0;a<4;a++){for(var c=[],l=0;l<4;l++)c.push(t[l][a]);n.push(c)}return n}(i),t=structuredClone(i);i=structuredClone(e),e=null,y(t,i)||p(i),t=null,u.textContent=l,g()},e.moveDown=function(){var e=function(e){for(var t=[],n=[],r=0;r<4;r++){for(var o=[],u=0;u<4;u++)o.push(e[u][r]);t.push(o)}t.forEach(function(e){return m(e)});for(var a=0;a<4;a++){for(var c=[],l=0;l<4;l++)c.push(t[l][a]);n.push(c)}return n}(i),t=structuredClone(i);i=structuredClone(e),e=null,y(t,i)||p(i),t=null,u.textContent=l,g()},document.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&e.moveLeft(),"ArrowRight"===t.key&&e.moveRight(),"ArrowUp"===t.key&&e.moveUp(),"ArrowDown"===t.key&&e.moveDown()}),document.addEventListener("touchstart",function(e){var t=e.touches[0];f=t.clientX,d=t.clientY}),document.addEventListener("touchmove",function(t){if(f&&d){var n=t.touches[0].clientX,r=t.touches[0].clientY,o=f-n,u=d-r;Math.pow(o,2)>Math.pow(u,2)?o>0?e.moveLeft():e.moveRight():u>0?e.moveUp():e.moveDown(),f=null,d=null}});var f=null,d=null;function v(e){if(!e.includes(0))return"message-lose";var t=e.map(function(e,t){return 0===e?t:null}).filter(function(e){return null!==e});e[t[Math.floor(Math.random()*t.length)]]=.1>=Math.random()?4:2}function h(e){for(var t,n,r,o,u,a,c=e.length-2;c>=0;c--)0===e[c]&&0!==e[c+1]&&(t=[e[c+1],e[c]],e[c]=t[0],e[c+1]=t[1]),0!==e[c]&&e[c+1]===e[c]&&0===e[c-1]&&(n=[e[c+1],e[c-1]],e[c-1]=n[0],e[c+1]=n[1]);for(var s=0;s<e.length-1;s++)0===e[s]&&s+2<e.length&&(r=[e[s+1],e[s+2],0],e[s]=r[0],e[s+1]=r[1],e[s+2]=r[2]),0!==e[s]&&e[s+1]===e[s]&&(o=[e[s+1]+e[s],0],e[s]=o[0],e[s+1]=o[1],l+=e[s]);for(var i=e.length-2;i>=0;i--)0===e[i]&&0!==e[i+1]&&(u=[e[i+1],e[i]],e[i]=u[0],e[i+1]=u[1]),0!==e[i]&&e[i+1]===e[i]&&0===e[i-1]&&(a=[e[i+1],e[i-1]],e[i-1]=a[0],e[i+1]=a[1]);return e}function m(e){for(var t,n,r,o,u,a,c=1;c<e.length;c++)0===e[c]&&0!==e[c-1]&&(t=[e[c-1],e[c]],e[c]=t[0],e[c-1]=t[1]),0!==e[c]&&e[c-1]===e[c]&&0===e[c+1]&&(n=[e[c-1],e[c+1]],e[c+1]=n[0],e[c-1]=n[1]);for(var s=e.length-1;s>=0;s--)0===e[s]&&s-2>0&&(r=[e[s-1],e[s-2],0],e[s]=r[0],e[s-1]=r[1],e[s-2]=r[2]),0!==e[s]&&e[s-1]===e[s]&&(o=[e[s-1]+e[s],0],e[s]=o[0],e[s-1]=o[1],l+=e[s]);for(var i=1;i<e.length;i++)0===e[i]&&0!==e[i-1]&&(u=[e[i-1],e[i]],e[i]=u[0],e[i-1]=u[1]),0!==e[i]&&e[i-1]===e[i]&&0===e[i+1]&&(a=[e[i-1],e[i+1]],e[i+1]=a[0],e[i-1]=a[1])}function g(){var e=[];a.forEach(function(e){return e.className="field-cell"});for(var t=0;t<4;t++)for(var n=0;n<4;n++)e.push(i[t][n]);e.includes(2048)&&r.classList.remove("hidden");for(var u=0;u<e.length;u++)0!==e[u]&&(a[u].textContent=e[u]),0===e[u]&&(a[u].textContent="");a.forEach(function(e){e.textContent>0&&e.classList.add("field-cell--".concat(e.textContent))});for(var c=[],l=!1,s=0;s<4;s++){for(var f=[],d=0;d<4;d++)f.push(i[d][s]);c.push(f)}for(var v=0;v<4;v++){for(var h=0;h<3;h++)i[v].includes(0)||i[v][h]!==i[v][h+1]||(l=!0);i[v].includes(0)&&(l=!0)}for(var m=0;m<4;m++)for(var g=0;g<3;g++)c[m].includes(0)||c[m][g]!==c[m][g+1]||(l=!0);l||o.classList.remove("hidden")}function p(e){for(var t=[],n=0;n<4;n++)for(var r=0;r<4;r++)t.push(e[n][r]);t.includes(0)?v(t):o.classList.remove("hidden");for(var u=0,a=0;a<4;a++)for(var c=0;c<4;c++)e[a][c]=t[u],u++;return e}function y(e,t){for(var n=[],r=[],o=0;o<e.length;o++)for(var u=0;u<e.length;u++)n.push(e[o][u]),r.push(t[o][u]);for(var a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}}();
//# sourceMappingURL=index.63e61ee2.js.map
